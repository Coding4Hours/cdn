{"version":3,"file":"gmes.astro_astro_type_script_index_0_lang.Za7tPpww.js","sources":["../../src/utils/gmes.ts"],"sourcesContent":["import gmesData from \"@/data/gmes.json\";\nimport { fetch } from \"@/utils/fetch.ts\";\n\nconst FILTER_OPTIMIZE_ON = import.meta.env.PUBLIC_FILTER_OPTIMIZE === \"true\";\nconst gmes_text = FILTER_OPTIMIZE_ON ? \"gá¾°mes\" : \"games\";\n\n(() => {\n  const target = document.querySelector(\"#gmeContainer\");\n  const searchInput = document.getElementById(\"search\");\n\n  searchInput.placeholder = `Search from ${gmesData.length} ${gmes_text}`;\n\n  if (!target) {\n    console.error(\"Target container #gmeContainer not found.\");\n    return;\n  }\n\n  if (!searchInput) {\n    console.error(\"Search input with id 'search' not found.\");\n    return;\n  }\n\n  target.innerHTML = `<p style='text-align: center; font-family: sans-serif; color: #555;'>Loading ${gmes_text}...</p>`;\n\n  const allGmes = [...gmesData].sort((a, b) =>\n    a.title.localeCompare(b.title, undefined, { sensitivity: \"base\" }),\n  );\n\n  const renderGmes = (gmesToRender) => {\n    if (gmesToRender.length === 0) {\n      target.innerHTML = `<p style='text-align: center; font-family: sans-serif; color: #555;'>No ${gmes_text} found.</p>`;\n      return;\n    }\n\n    target.innerHTML = `\n  <div style=\"display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; padding: 10px;\">\n    ${gmesToRender\n      .map(\n        (gme) => `\n      <div\n        onclick=\"opengme('${gme.file_name}', '${gme.title}', '${gme.frame}')\"\n        class=\"bg-bg border border-overlay rounded-xl p-3 m-2 inline-block w-64 text-center shadow-sm transition-transform duration-200 hover:scale-105 cursor-pointer\"\n      >\n        <h3 class=\"mt-2 font-medium  truncate\">${gme.title}</h3>\n      </div>\n    `,\n      )\n      .join(\"\")}\n  </div>\n`;\n  };\n\n  searchInput.addEventListener(\"input\", (event) => {\n    const searchQuery = event.target.value.toLowerCase();\n    const filteredGmes = allGmes.filter((gme) =>\n      gme.title.toLowerCase().includes(searchQuery),\n    );\n    renderGmes(filteredGmes);\n  });\n\n  renderGmes(allGmes);\n\n  window.opengme = async (file_name, title, frameGme) => {\n    const frame = document.getElementById(\"gmePageFrame\");\n    const container = document.getElementById(\"gmePageContainer\");\n    const titleEl = document.getElementById(\"gmePageTitle\");\n\n    titleEl.textContent = title;\n    container.classList.remove(\"hidden\");\n    document.body.style.overflow = \"hidden\";\n\n    if (frameGme == \"true\") {\n      // Directly load raw.githack URL\n      frame.src = `https://raw.githack.com/Bromine-Labs/asseting-bromine/main/${file_name}`;\n    } else {\n      delete frame.dataset.loaded;\n      frame.onload = async () => {\n        if (frame.dataset.loaded) return;\n        const doc = frame.contentDocument;\n\n        const html = await fetch(\n          `https://raw.githubusercontent.com/Bromine-Labs/asseting-bromine/main/${file_name}`,\n        ).then((r) => r.text());\n\n        doc.open();\n        doc.write(html);\n        doc.close();\n\n        // Re-run scripts\n        doc.querySelectorAll(\"script\").forEach((s) => {\n          const script = doc.createElement(\"script\");\n          script.src = s.src || \"\";\n          if (!s.src) script.textContent = s.textContent;\n          s.replaceWith(script);\n        });\n\n        frame.dataset.loaded = true;\n      };\n\n      frame.src = \"/asdf.html\";\n    }\n  };\n\n  window.closegme = () => {\n    const gmePageContainer = document.getElementById(\"gmePageContainer\");\n    const gmePageFrame = document.getElementById(\"gmePageFrame\");\n\n    gmePageFrame.src = \"\";\n    gmePageContainer.classList.add(\"hidden\");\n    document.body.style.overflow = \"\";\n  };\n\n  document.getElementById(\"backBtn\").addEventListener(\"click\", () => {\n    closegme();\n  });\n  document.getElementById(\"fullscreenBtn\").addEventListener(\"click\", () => {\n    document.getElementById(\"gmePageFrame\").requestFullscreen();\n  });\n})();\n"],"names":["gmes_text","target","searchInput","gmesData","allGmes","a","b","renderGmes","gmesToRender","gme","event","searchQuery","filteredGmes","file_name","title","frameGme","frame","container","titleEl","doc","html","fetch","r","s","script","gmePageContainer","gmePageFrame"],"mappings":"8/wEAIMA,EAAiC,SAEtC,IAAM,CACL,MAAMC,EAAS,SAAS,cAAc,eAAe,EAC/CC,EAAc,SAAS,eAAe,QAAQ,EAIpD,GAFAA,EAAY,YAAc,eAAeC,EAAS,MAAM,IAAIH,CAAS,GAEjE,CAACC,EAAQ,CACX,QAAQ,MAAM,2CAA2C,EACzD,MACF,CAEA,GAAI,CAACC,EAAa,CAChB,QAAQ,MAAM,0CAA0C,EACxD,MACF,CAEAD,EAAO,UAAY,gFAAgFD,CAAS,UAE5G,MAAMI,EAAU,CAAC,GAAGD,CAAQ,EAAE,KAAK,CAACE,EAAGC,IACrCD,EAAE,MAAM,cAAcC,EAAE,MAAO,OAAW,CAAE,YAAa,MAAA,CAAQ,CAAA,EAG7DC,EAAcC,GAAiB,CACnC,GAAIA,EAAa,SAAW,EAAG,CAC7BP,EAAO,UAAY,2EAA2ED,CAAS,cACvG,MACF,CAEAC,EAAO,UAAY;AAAA;AAAA,MAEjBO,EACC,IACEC,GAAQ;AAAA;AAAA,4BAEWA,EAAI,SAAS,OAAOA,EAAI,KAAK,OAAOA,EAAI,KAAK;AAAA;AAAA;AAAA,iDAGxBA,EAAI,KAAK;AAAA;AAAA,KAAA,EAInD,KAAK,EAAE,CAAC;AAAA;AAAA,CAGb,EAEAP,EAAY,iBAAiB,QAAUQ,GAAU,CAC/C,MAAMC,EAAcD,EAAM,OAAO,MAAM,YAAA,EACjCE,EAAeR,EAAQ,OAAQK,GACnCA,EAAI,MAAM,YAAA,EAAc,SAASE,CAAW,CAAA,EAE9CJ,EAAWK,CAAY,CACzB,CAAC,EAEDL,EAAWH,CAAO,EAElB,OAAO,QAAU,MAAOS,EAAWC,EAAOC,IAAa,CACrD,MAAMC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAY,SAAS,eAAe,kBAAkB,EACtDC,EAAU,SAAS,eAAe,cAAc,EAEtDA,EAAQ,YAAcJ,EACtBG,EAAU,UAAU,OAAO,QAAQ,EACnC,SAAS,KAAK,MAAM,SAAW,SAE3BF,GAAY,OAEdC,EAAM,IAAM,8DAA8DH,CAAS,IAEnF,OAAOG,EAAM,QAAQ,OACrBA,EAAM,OAAS,SAAY,CACzB,GAAIA,EAAM,QAAQ,OAAQ,OAC1B,MAAMG,EAAMH,EAAM,gBAEZI,EAAO,MAAMC,EACjB,wEAAwER,CAAS,EAAA,EACjF,KAAMS,GAAMA,EAAE,MAAM,EAEtBH,EAAI,KAAA,EACJA,EAAI,MAAMC,CAAI,EACdD,EAAI,MAAA,EAGJA,EAAI,iBAAiB,QAAQ,EAAE,QAASI,GAAM,CAC5C,MAAMC,EAASL,EAAI,cAAc,QAAQ,EACzCK,EAAO,IAAMD,EAAE,KAAO,GACjBA,EAAE,MAAKC,EAAO,YAAcD,EAAE,aACnCA,EAAE,YAAYC,CAAM,CACtB,CAAC,EAEDR,EAAM,QAAQ,OAAS,EACzB,EAEAA,EAAM,IAAM,aAEhB,EAEA,OAAO,SAAW,IAAM,CACtB,MAAMS,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAe,SAAS,eAAe,cAAc,EAE3DA,EAAa,IAAM,GACnBD,EAAiB,UAAU,IAAI,QAAQ,EACvC,SAAS,KAAK,MAAM,SAAW,EACjC,EAEA,SAAS,eAAe,SAAS,EAAE,iBAAiB,QAAS,IAAM,CACjE,SAAA,CACF,CAAC,EACD,SAAS,eAAe,eAAe,EAAE,iBAAiB,QAAS,IAAM,CACvE,SAAS,eAAe,cAAc,EAAE,kBAAA,CAC1C,CAAC,CACH,GAAA"}