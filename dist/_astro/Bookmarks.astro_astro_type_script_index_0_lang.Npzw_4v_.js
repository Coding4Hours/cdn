import{g as w}from"./lethal.DYAN9FjL.js";import"./index.gJcamd8L.js";const k=document.getElementById("bookmarks"),v=document.getElementById("bookmark-form"),b=document.getElementById("bookmark-id"),h=document.getElementById("bookmark-title"),y=document.getElementById("bookmark-url"),f=document.getElementById("delete-btn"),i=document.getElementById("bookmark-context-menu");let s=JSON.parse(localStorage.getItem("bookmarks")||"[]"),c=-1;const g=()=>{if(k){if(0===s.length)return void(k.innerHTML='\n        <div class="text-center py-4 -muted text-sm">\n          No bookmarks yet. Add one above!\n        </div>\n      ');s.forEach(((t,e)=>{const n=document.createElement("li");n.className="group flex items-center justify-between p-2 rounded hover:bg-surface1 transition-colors";const o=document.createElement("span");o.className="flex-1 min-w-0 truncate text-sm  text-link transition-colors",o.title=`${t.title}\n${t.url}`,o.onclick=async()=>{currentFrame.src=await w(t.url)};const r=document.createElement("span");r.className="font-medium",r.textContent=t.title;const s=document.createElement("span");s.className="text-xs block truncate",s.textContent=t.url,o.appendChild(r),o.appendChild(s);const i=document.createElement("button");i.className="bookmark-context-trigger p-1 rounded hover:bg-surface2 -muted hover: transition-colors opacity-0 group-hover:opacity-100",i.setAttribute("data-index",e),i.setAttribute("aria-label","Bookmark actions");const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width","16"),c.setAttribute("height","16"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.setAttribute("stroke","currentColor"),c.setAttribute("stroke-width","2"),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round");const l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("cx","12"),l.setAttribute("cy","12"),l.setAttribute("r","1");const a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx","12"),a.setAttribute("cy","5"),a.setAttribute("r","1");const d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.setAttribute("cx","12"),d.setAttribute("cy","19"),d.setAttribute("r","1"),c.appendChild(l),c.appendChild(a),c.appendChild(d),i.appendChild(c),n.appendChild(o),n.appendChild(i),k.appendChild(n)})),document.querySelectorAll(".bookmark-context-trigger").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();const n=parseInt(t.getAttribute("data-index"));E(e,n)}))}))}},x=()=>{localStorage.setItem("bookmarks",JSON.stringify(s)),g()},A=(t,e,n=null)=>{null!==n&&n>=0&&n<s.length?s[n]={title:t,url:e}:s.push({title:t,url:e}),x()},E=(t,e)=>{t.preventDefault(),t.stopPropagation(),c=e;const{clientX:n,clientY:o}=t;i.style.left=`${n}px`,i.style.top=`${o}px`,i.style.display="block";const r=t=>{i.contains(t.target)||(i.style.display="none",document.removeEventListener("click",r))};setTimeout((()=>{document.addEventListener("click",r)}))};v?.addEventListener("submit",(t=>{t.preventDefault();const e=h.value.trim(),n=y.value.trim(),o=b.value;e&&n&&(A(e,n,o?parseInt(o):null),v.reset(),b.value="",f.classList.add("hidden"))})),g(),i.addEventListener("click",(t=>{const{action:e}=t.target.dataset;if(i.classList.add("hidden"),null!==c&&s[c]){const t=s[c];"edit"===e?(b.value=c,h.value=t.title,y.value=t.url,f.classList.remove("hidden")):"delete"===e&&confirm(`Are you sure you want to delete "${t.title}"?`)&&(s.splice(c,1),x())}c=null})),g();