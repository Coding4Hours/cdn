import{m as v,g as p,c as g}from"./lethal.DYAN9FjL.js";import{f as L}from"./fetch.DGyoe94k.js";import"./index.gJcamd8L.js";const n=document.getElementById("address"),i=document.getElementById("suggs-container"),o=document.getElementById("suggs-list"),y=document.getElementById("form");let a=-1;const h=e=>new Promise((async t=>{if(e)try{t((await(await L(`https://duckduckgo.com/ac/?q=${encodeURIComponent(e)}`)).json()).map((e=>e.phrase)))}catch{t([])}else t([])})),f=e=>{const t=n.value.trim();if(o.innerHTML="",t.length>=2&&(e=[t,...e]),0===e.length)return i.classList.add("hidden"),void(a=-1);o.innerHTML=e.map(((e,t)=>`\n\t\t\t<li class="p-2 cursor-pointer hover:bg-overlay" data-index="${t}">\n\t\t\t\t${e}\n\t\t\t</li>\n\t\t`)).join("");const s=[...o.children];a=0,s[a].classList.add("bg-overlay"),n.value=s[a].textContent.trim(),s.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),n.value=e.textContent.trim(),i.classList.add("hidden"),y.dispatchEvent(new Event("submit")),n.blur()}))})),i.classList.remove("hidden")},m=e=>{const t=[...o.children];0!==t.length&&(a>-1&&t[a]&&t[a].classList.remove("bg-overlay"),e<0&&(e=t.length-1),e>=t.length&&(e=0),t[e].classList.add("bg-overlay"),a=e,n.value=t[a].textContent.trim())};n.addEventListener("input",(async()=>{const e=n.value.trim();if(n.dataset.originalValue=n.dataset.originalValue||n.value,e.length<2)return o.innerHTML="",void i.classList.add("hidden");const t=await h(e);f(t)})),n.addEventListener("focus",(async()=>{const e=n.value.trim();if(e.length>=2&&o.children.length>0)i.classList.remove("hidden");else if(e.length>=2){const t=await h(e);f(t)}})),n.addEventListener("blur",(()=>{setTimeout((()=>{i.classList.add("hidden"),delete n.dataset.originalValue,a=-1}),100)})),n.addEventListener("keydown",(e=>{const t=[...o.children];if(0===t.length||i.classList.contains("hidden"))return;const s={ArrowDown:()=>{e.preventDefault();let n=a+1;n>=t.length&&(n=-1),m(n)},ArrowUp:()=>{e.preventDefault();let n=a-1;n<-1&&(n=t.length-1),m(n)},Enter:async()=>{if(a>-1){e.preventDefault();let t=localStorage.getItem("bromine_search_engine")||"https://duckduckgo.com/search?q=%s";const a=v(n.value,t),s=await p(a);let i=document.getElementById(`frame-${g}`);localStorage.getItem("bromine_stealth_mode")?i?.contentWindow?.location.replace(s):i.src=s,i===document.getElementById(`frame-${g}`)&&(n.value=a,i.focus())}},Escape:()=>{e.preventDefault(),i.classList.add("hidden"),n.value=n.dataset.originalValue||"",delete n.dataset.originalValue,a=-1,n.blur()}}[e.key];s&&s()}));