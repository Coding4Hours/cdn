import{g as a,e as c}from"./lethal.DYAN9FjL.js";import"./index.gJcamd8L.js";const p=document.getElementById("omnibar-history-btn"),e=document.getElementById("history-popup"),n=document.getElementById("history-popup-content"),l=document.getElementById("history-close-btn");function u(){e.classList.remove("hidden","pointer-events-none"),requestAnimationFrame((()=>{e.classList.add("opacity-100"),n.classList.remove("-translate-y-full"),n.classList.add("translate-y-0")})),document.dispatchEvent(new CustomEvent("popup-opened",{detail:{popupId:"history-popup"}}))}function s(){e.classList.remove("opacity-100"),n.classList.remove("translate-y-0"),n.classList.add("-translate-y-full"),setTimeout((()=>{e.classList.add("hidden","pointer-events-none"),document.dispatchEvent(new CustomEvent("popup-closed",{detail:{popupId:"history-popup"}}))}),300)}function d(){const e=JSON.parse(localStorage.getItem("history")||"[]"),t=document.getElementById("history");t&&(t.innerHTML="",e.forEach((e=>{const n=document.createElement("li");n.innerHTML=`<span title="${e.url}" class="text-link underline cursor-pointer">${e.title}</span>`,n.addEventListener("click",(async()=>{c.src=await a(e.url),s()})),t.appendChild(n)})))}p.addEventListener("click",u),l.addEventListener("click",s),e.addEventListener("click",(t=>{t.target===e&&s()})),window.addEventListener("keydown",(t=>{"Escape"===t.key&&!e.classList.contains("hidden")&&(t.preventDefault(),s())})),window.addEventListener("storage",(e=>{"history"===e.key&&d()})),window.addEventListener("history_changed",d),d();